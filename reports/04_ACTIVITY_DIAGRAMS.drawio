<mxfile host="app.diagrams.net" modified="2024-01-15T00:00:00.000Z" agent="5.0" version="21.0.0" etag="drawio" type="device">
  <diagram name="Activity_TransactionEntry" id="activity-tx-entry">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="ACTIVITY DIAGRAM: Quy Trình Nhập Giao Dịch" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="50" y="20" width="1500" height="40" as="geometry" />
        </mxCell>

        <!-- Start -->
        <mxCell id="start" value="Start" style="ellipse;whiteSpace=wrap;html=1;fillColor=#C5E1A5;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="700" y="80" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Decision: Input Method -->
        <mxCell id="decision-method" value="Chọn phương thức nhập?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="650" y="180" width="200" height="100" as="geometry" />
        </mxCell>

        <!-- Manual Entry Flow -->
        <mxCell id="manual-start" value="Nhập thủ công" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="200" y="320" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="manual-form" value="Điền form:&#xa;- Loại giao dịch&#xa;- Category&#xa;- Số tiền&#xa;- Mô tả&#xa;- Ngày" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="200" y="420" width="150" height="100" as="geometry" />
        </mxCell>
        <mxCell id="manual-validate" value="Validate dữ liệu" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="200" y="560" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="manual-error" value="Hiển thị lỗi" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="50" y="680" width="150" height="60" as="geometry" />
        </mxCell>

        <!-- NLU Entry Flow -->
        <mxCell id="nlu-start" value="Nhập bằng NLU" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCCBC;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="320" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nlu-input" value="Nhập câu lệnh tự nhiên:&#xa;&quot;ăn bún bò 50k&quot;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCCBC;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="420" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nlu-process" value="Gọi AI Service&#xa;xử lý NLU" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCCBC;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="540" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nlu-check" value="AI hiểu được?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="640" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nlu-error" value="Yêu cầu nhập lại" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCDD2;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1400" y="680" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nlu-preview" value="Hiển thị preview&#xa;cho user xác nhận" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCCBC;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="760" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="nlu-confirm" value="User xác nhận?" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1200" y="860" width="150" height="80" as="geometry" />
        </mxCell>
        <mxCell id="nlu-edit" value="Chỉnh sửa" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFCCBC;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="1400" y="900" width="150" height="60" as="geometry" />
        </mxCell>

        <!-- Common Flow -->
        <mxCell id="create-tx" value="Tạo transaction&#xa;trong database" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="650" y="1000" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="check-budget" value="Kiểm tra budget" style="rhombus;whiteSpace=wrap;html=1;fillColor=#FFF9C4;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="650" y="1100" width="200" height="80" as="geometry" />
        </mxCell>
        <mxCell id="create-notification" value="Tạo notification&#xa;nếu vượt budget" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8BBD0;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="450" y="1200" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="update-cache" value="Cập nhật cache" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="650" y="1200" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="display-success" value="Hiển thị thành công" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C5E1A5;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="650" y="1300" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- End -->
        <mxCell id="end" value="End" style="ellipse;whiteSpace=wrap;html=1;fillColor=#EF5350;strokeColor=#000000;strokeWidth=2;" vertex="1" parent="1">
          <mxGeometry x="700" y="1400" width="100" height="60" as="geometry" />
        </mxCell>

        <!-- Edges -->
        <mxCell id="edge-start-decision" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;" edge="1" parent="1" source="start" target="decision-method">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-decision-manual" value="Thủ công" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;" edge="1" parent="1" source="decision-method" target="manual-start">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-decision-nlu" value="NLU" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;" edge="1" parent="1" source="decision-method" target="nlu-start">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-manual-form" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#388E3C;" edge="1" parent="1" source="manual-start" target="manual-form">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-form-validate" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#388E3C;" edge="1" parent="1" source="manual-form" target="manual-validate">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-validate-error" value="Lỗi" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D32F2F;" edge="1" parent="1" source="manual-validate" target="manual-error">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-error-form" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D32F2F;dashed=1;" edge="1" parent="1" source="manual-error" target="manual-form">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-validate-create" value="Hợp lệ" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#388E3C;" edge="1" parent="1" source="manual-validate" target="create-tx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-nlu-input" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E64A19;" edge="1" parent="1" source="nlu-start" target="nlu-input">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-input-process" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E64A19;" edge="1" parent="1" source="nlu-input" target="nlu-process">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-process-check" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E64A19;" edge="1" parent="1" source="nlu-process" target="nlu-check">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-check-error" value="Không" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D32F2F;" edge="1" parent="1" source="nlu-check" target="nlu-error">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-error-input" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D32F2F;dashed=1;" edge="1" parent="1" source="nlu-error" target="nlu-input">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-check-preview" value="Có" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E64A19;" edge="1" parent="1" source="nlu-check" target="nlu-preview">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-preview-confirm" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E64A19;" edge="1" parent="1" source="nlu-preview" target="nlu-confirm">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-confirm-edit" value="Chỉnh sửa" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D32F2F;" edge="1" parent="1" source="nlu-confirm" target="nlu-edit">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-edit-preview" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#D32F2F;dashed=1;" edge="1" parent="1" source="nlu-edit" target="nlu-preview">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-confirm-create" value="Xác nhận" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#E64A19;" edge="1" parent="1" source="nlu-confirm" target="create-tx">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-create-budget" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;" edge="1" parent="1" source="create-tx" target="check-budget">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-budget-notification" value="Vượt ngưỡng" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#C2185B;" edge="1" parent="1" source="check-budget" target="create-notification">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-budget-cache" value="OK" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;" edge="1" parent="1" source="check-budget" target="update-cache">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-notification-cache" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;" edge="1" parent="1" source="create-notification" target="update-cache">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-cache-success" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#388E3C;" edge="1" parent="1" source="update-cache" target="display-success">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="edge-success-end" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#1976D2;" edge="1" parent="1" source="display-success" target="end">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>


