    @startuml ACT_003_ManualTransaction
start
:User truy cập trang thêm giao dịch;
:User chọn loại giao dịch (income/expense/transfer);
:User chọn category;
:User nhập số tiền;
:User nhập mô tả (tùy chọn);
:User chọn ngày giao dịch;
:User nhập thông tin bổ sung:
location, tags, metadata (tùy chọn);
:User nhấn "Lưu";
:Validate dữ liệu;
if (Dữ liệu không hợp lệ?) then (có)
  :Hiển thị lỗi validation;
  stop
endif
:Kiểm tra category tồn tại và thuộc về user;
if (Category không tồn tại?) then (có)
  :Trả về lỗi "Category not found";
  stop
endif
if (Số tiền <= 0?) then (có)
  :Trả về lỗi "Amount must be greater than 0";
  stop
endif
:Tạo transaction record;
:Kiểm tra budget và tạo notification nếu vượt ngưỡng;
if (Amount > 1M VND?) then (có)
  :Gửi thông báo giao dịch lớn;
endif
:Xóa dashboard cache;
:Trả về transaction đã tạo;
:Hiển thị giao dịch mới trong danh sách;
stop
@enduml

