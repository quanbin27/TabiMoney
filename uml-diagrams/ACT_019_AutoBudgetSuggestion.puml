@startuml ACT_019_AutoBudgetSuggestion
start
:User truy cập trang "Đề xuất ngân sách"
hoặc nhấn "Tạo ngân sách tự động";
:Lấy monthly_income từ user_profile;
if (monthly_income = 0 hoặc NULL?) then (có)
  :Yêu cầu user khai báo monthly_income trước;
  stop
endif
:Phân tích chi tiêu 3 tháng gần nhất;
if (User có < 1 tháng dữ liệu?) then (có)
  :Thông báo "Cần thêm dữ liệu để đề xuất chính xác";
  stop
endif
:Tính trung bình chi tiêu theo category;
:Xác định các category chiếm % lớn;
:Đề xuất budget cho từng category:
Suggested amount = avg_spending * 1.1
(thêm 10% buffer);
if (Category chiếm > 30% tổng chi tiêu?) then (có)
  :Đề xuất giảm;
endif
:Đảm bảo tổng suggested <= monthly_income * 0.9
(để lại 10% tiết kiệm);
:Hiển thị danh sách đề xuất với:
Category name, Suggested amount,
Current average spending, Difference;
if (User chấp nhận tất cả?) then (có)
  :Tạo budgets cho các category được chọn;
  :Set period = 'monthly';
  :Set start_date = đầu tháng;
  :Set end_date = cuối tháng;
  :Trả về danh sách budgets đã tạo;
elseif (User chỉnh sửa?) then (có)
  :Cho phép chỉnh sửa từng mục;
  :Tạo budgets với giá trị đã chỉnh sửa;
else (Từ chối)
  stop
endif
stop
@enduml

