@startuml UC_017_TelegramTransaction
actor User
actor "Telegram Bot" as Telegram

package "Telegram Integration" {
    usecase "Nhập giao dịch qua Telegram" as UC_TelegramTransaction
    usecase "Gửi tin nhắn trong Telegram" as UC_SendMessage
    usecase "Nhận diện telegram_user_id" as UC_IdentifyUser
    usecase "Tìm web_user_id" as UC_FindWebUser
    usecase "Gửi đến Backend API" as UC_SendToBackend
    usecase "Xử lý NLU" as UC_ProcessNLU
    usecase "Tạo transaction" as UC_CreateTransaction
    usecase "Gửi xác nhận" as UC_SendConfirmation
}

User --> UC_TelegramTransaction
Telegram --> UC_SendMessage
Telegram --> UC_IdentifyUser
Telegram --> UC_SendConfirmation
UC_TelegramTransaction ..> UC_SendMessage : <<includes>>
UC_TelegramTransaction ..> UC_IdentifyUser : <<includes>>
UC_TelegramTransaction ..> UC_FindWebUser : <<includes>>
UC_TelegramTransaction ..> UC_SendToBackend : <<includes>>
UC_TelegramTransaction ..> UC_ProcessNLU : <<includes>>
UC_TelegramTransaction ..> UC_CreateTransaction : <<includes>>
UC_TelegramTransaction ..> UC_SendConfirmation : <<includes>>

@enduml

