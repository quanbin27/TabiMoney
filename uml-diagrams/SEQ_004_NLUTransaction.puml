@startuml SEQ_004_NLUTransaction
actor User
participant "Frontend" as Frontend
participant "Backend API" as Backend
participant "AI Service" as AI
participant "NLU Service" as NLU
participant "Database" as DB

User -> Frontend: Nhập câu: "tôi vừa ăn bún bò 50k"
Frontend -> Backend: POST /api/v1/ai/nlu
Backend -> AI: Gửi yêu cầu NLU
AI -> NLU: Xử lý ngôn ngữ tự nhiên
NLU -> NLU: Trích xuất: amount, category, date
NLU --> AI: Trả về structured data
AI --> Backend: {amount: 50000, category: "Ăn uống", date: "2024-01-15"}
Backend -> DB: Kiểm tra category
DB --> Backend: Category info
Backend -> DB: Tạo transaction
DB --> Backend: Transaction created
Backend -> AI: Gợi ý category (nếu cần)
AI --> Backend: Category suggestion
Backend --> Frontend: Transaction response
Frontend --> User: Hiển thị giao dịch đã tạo

@enduml

