@startuml Sequence_GoalManagement
actor User
participant "Frontend" as Frontend
participant "Backend API" as Backend
participant "Goal Service" as GoalService
participant "Database" as DB
participant "Notification Service" as Notification

User -> Frontend: Tạo mục tiêu mới
Frontend -> Backend: POST /api/v1/goals
Backend -> GoalService: CreateGoal(userID, request)
GoalService -> DB: INSERT INTO financial_goals
DB --> GoalService: Goal created
GoalService --> Backend: Goal response
Backend --> Frontend: Goal created

User -> Frontend: Đóng góp vào mục tiêu
Frontend -> Backend: POST /api/v1/goals/:id/contribute
Backend -> GoalService: AddContribution(goalID, amount)
GoalService -> DB: UPDATE financial_goals SET current_amount
DB --> GoalService: Updated
GoalService -> GoalService: Tính toán progress
GoalService -> GoalService: Kiểm tra đạt mục tiêu?
alt Mục tiêu đạt được
    GoalService -> DB: UPDATE is_achieved = true
    GoalService -> Notification: Gửi thông báo chúc mừng
    Notification --> User: Thông báo
end
GoalService --> Backend: Updated goal
Backend --> Frontend: Goal updated

@enduml

