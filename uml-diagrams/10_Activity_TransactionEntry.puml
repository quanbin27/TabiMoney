@startuml Activity_TransactionEntry
start
:User chọn phương thức nhập;
if (Phương thức?) then (Thủ công)
    :Điền form: category, amount, date, description;
else (NLU)
    :Nhập câu tự nhiên;
    :Gửi đến AI Service;
    :AI xử lý và trích xuất thông tin;
    :Hiển thị preview;
    if (User xác nhận?) then (Không)
        :Cho phép chỉnh sửa;
    endif
endif
:Validate dữ liệu;
if (Dữ liệu hợp lệ?) then (Không)
    :Hiển thị lỗi;
    stop
endif
:Kiểm tra category;
if (Category hợp lệ?) then (Không)
    :Gợi ý category từ AI;
    :User chọn category;
endif
:Lưu transaction vào DB;
:Kiểm tra budget threshold;
if (Vượt ngân sách?) then (Có)
    :Gửi thông báo cảnh báo;
endif
:Kiểm tra giao dịch lớn;
if (Amount > 1M VND?) then (Có)
    :Gửi thông báo giao dịch lớn;
endif
:Xóa dashboard cache;
:Hiển thị thông báo thành công;
stop

@enduml

